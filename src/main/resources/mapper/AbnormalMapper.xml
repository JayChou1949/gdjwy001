<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.upd.hwcloud.dao.AbnormalMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.upd.hwcloud.bean.entity.Abnormal">
        <id column="ID" property="id" />
        <result column="NAME" property="name" />
        <result column="URL" property="url" />
        <result column="ABNOEMAL_REQ_TIME" property="abnoemalReqTime" />
        <result column="RESPONSE" property="response" />
        <result column="MODULE" property="module" />
    </resultMap>

    <select id="getPage" resultType="com.upd.hwcloud.bean.entity.Abnormal" >
        SELECT * FROM TB_ABNORMAL
        <where>
            <if test="keywords != null and keywords != ''">
                AND (NAME LIKE CONCAT(CONCAT('%',#{keywords}),'%')
                OR MODULE LIKE CONCAT(CONCAT('%',#{keywords}),'%'))
            </if>
        </where>
        ORDER BY ABNOEMAL_REQ_TIME DESC
    </select>
</mapper>
